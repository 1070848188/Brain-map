<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    /*
      观察者模式：
        观察者模式中的观察者和目标是相互依赖的
        1. 创建观察目标
        2. 创建多个观察者  观察目标  形成依赖
        3. 目标发生变化 通知所有观察者更新视图
    */

   class Subject {
       constructor () {
           this.subs = [] // 目标
       }

       addSubs (sub) {
        this.subs.push(sub) // 添加观察者
       }

       notify() { // 通知所有观察者更新视图
           this.subs.forEach(ob => ob.updata())
       }

       clear () { // 清空观察者
           this.subs = []
       }
   }

   class Observe {
        constructor (name) {
            this.name = name
        }

       updata () {
           console.log(this.name, '---视图更新了');
       }
   }

   const sub = new Subject() // 创建目标对象
   const ob1 = new Observe('视图1')
   const ob2 = new Observe('视图2')
   sub.addSubs(ob1)
   sub.addSubs(ob2)

   sub.notify()
</script>
</html>